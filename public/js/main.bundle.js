document.addEventListener("DOMContentLoaded",function(){(()=>{const e=document.querySelectorAll(".reveal");if(e.length>0){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},{threshold:.1});e.forEach(e=>t.observe(e))}})();const e=document.getElementById("year");e&&(e.textContent=(new Date).getFullYear());const t=document.getElementById("WorkshopForm"),o=document.getElementById("confirmation"),n=document.getElementById("closeConfirmation"),s=document.getElementById("formError"),a=document.getElementById("submitButton");function i(){o&&(o.classList.remove("active"),o.setAttribute("aria-hidden","true"),o.style.visibility="hidden",o.style.opacity="0"),s&&(s.style.display="none")}t&&(t.addEventListener("submit",async function(e){if(e.preventDefault(),t.checkValidity()){s&&(s.style.display="none"),a&&(a.disabled=!0,a.textContent="Submitting...");try{const e=new FormData(t),n=await fetch("/api/registration",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Object.fromEntries(e)),credentials:"same-origin"});if(!n.ok){if(404===n.status){const n=Object.fromEntries(e);n.timestamp=(new Date).toISOString(),n.id=Date.now().toString();const a=JSON.parse(localStorage.getItem("pendingRegistrations")||"[]");return a.push(n),localStorage.setItem("pendingRegistrations",JSON.stringify(a)),console.log("Registration stored locally (API unavailable):",n),t.reset(),s&&(s.style.display="none"),void(o&&(o.style.display="block",window.scrollTo({top:0,behavior:"smooth"})))}throw new Error("Form submission failed")}await n.json(),t.reset(),s&&(s.style.display="none"),o&&(o.style.display="block",window.scrollTo({top:0,behavior:"smooth"}))}catch(e){console.error("Error:",e),s&&(s.style.display="block",s.scrollIntoView({behavior:"smooth",block:"center"}))}finally{a&&(a.disabled=!1,a.textContent="Submit Registration")}}else s&&(s.style.display="block",s.scrollIntoView({behavior:"smooth",block:"center"}))}),t.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("invalid",function(e){e.preventDefault(),this.classList.add("error")}),e.addEventListener("input",function(){this.validity.valid&&(this.classList.remove("error"),s&&(s.style.display="none"))})})),o&&o.addEventListener("click",e=>{e.target===o&&i()}),n&&n.addEventListener("click",i),document.addEventListener("keydown",function(e){"Escape"===e.key&&o&&o.classList.contains("active")&&i()});const c=document.getElementById("navToggle"),r=document.getElementById("siteNav");c&&r&&c.addEventListener("click",function(){r.classList.toggle("active"),this.classList.toggle("active"),document.body.classList.toggle("nav-open")}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const o=document.querySelector(t);o&&(window.scrollTo({top:o.offsetTop-80,behavior:"smooth"}),r&&r.classList.contains("active")&&(r.classList.remove("active"),c.classList.remove("active"),document.body.classList.remove("nav-open")))})});const l=document.getElementById("contactModal"),d=document.getElementById("faqModal"),m=document.getElementById("openContact"),u=document.getElementById("openFaq"),y=document.getElementById("closeContactModal"),g=document.getElementById("closeFaqModal"),v=(e,t)=>{if(e)if(t)e.classList.add("active"),e.setAttribute("aria-hidden","false"),document.body.classList.add("nav-open");else{const t=document.activeElement;t&&e.contains(t)&&t.blur(),e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.classList.remove("nav-open")}};m&&l&&m.addEventListener("click",()=>v(l,!0));const f=document.querySelectorAll("[data-open-contact]");l&&f.length&&f.forEach(e=>{e.addEventListener("click",()=>v(l,!0))}),u&&d&&u.addEventListener("click",()=>v(d,!0)),y&&l&&y.addEventListener("click",()=>v(l,!1)),g&&d&&g.addEventListener("click",()=>v(d,!1)),[l,d].forEach(e=>{e&&e.addEventListener("click",t=>{t.target===e&&v(e,!1)})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(v(l,!1),v(d,!1))}),document.addEventListener("click",e=>{const t=e.target.closest(".faq-question");if(!t)return;const o=t.closest(".faq-item");if(!o)return;const n=o.parentElement;n&&n.querySelectorAll(".faq-item").forEach(e=>{e!==o&&e.classList.remove("active")}),o.classList.toggle("active")});const p=document.getElementById("contactForm");p&&p.addEventListener("submit",async function(e){if(e.preventDefault(),!p.checkValidity())return void p.reportValidity();const t=Object.fromEntries(new FormData(p));try{const e=await async function(e){try{const t=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e),credentials:"same-origin"});if(!t.ok){if(404===t.status){e.timestamp=(new Date).toISOString(),e.id=Date.now().toString();const t=JSON.parse(localStorage.getItem("pendingMessages")||"[]");return t.push(e),localStorage.setItem("pendingMessages",JSON.stringify(t)),console.log("Contact message stored locally (API unavailable):",e),{status:"success",message:"Message saved locally"}}const o=await t.json().catch(()=>({}));throw new Error(o.message||"Contact submission failed")}return await t.json()}catch(e){throw console.error("Error:",e),e}}(t);e&&"success"===e.status?(p.reset(),v(l,!1),o&&(o.classList.add("active"),o.setAttribute("aria-hidden","false"),o.style.visibility="visible",o.style.opacity="1",window.scrollTo({top:0,behavior:"smooth"}))):(console.error("Contact submission failed",e),alert("Sorry, we could not send your message. Please try again later."))}catch(e){console.error("Contact submission error:",e),alert("Sorry, we could not send your message. Please try again later.")}})});
//# sourceMappingURL=main.bundle.js.map